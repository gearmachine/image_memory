(function(e){function t(t){for(var o,i,u=t[0],c=t[1],s=t[2],h=0,d=[];h<u.length;h++)i=u[h],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);l&&l(t);while(d.length)d.shift()();return r.push.apply(r,s||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,u=1;u<n.length;u++){var c=n[u];0!==a[c]&&(o=!1)}o&&(r.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},a={app:0},r=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],c=u.push.bind(u);u.push=t,u=u.slice();for(var s=0;s<u.length;s++)t(u[s]);var l=c;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var o=n("8a23"),a=n.n(o);a.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("canvas",{ref:"image"}),n("canvas",{ref:"circle"}),n("canvas",{ref:"canvas"},[e._v(" Sorry, your browser is too old for this demo. ")]),e.show?e._e():n("div",{staticStyle:{width:"200px","z-index":"1",position:"abusolute"}},[n("div",{ref:"touches"}),n("v-file-input",{attrs:{label:"手本画像","prepend-icon":"mdi-image",accept:"image/*",outlined:"",dense:""},on:{change:e.onImagePicked},model:{value:e.inputImage,callback:function(t){e.inputImage=t},expression:"inputImage"}}),n("v-text-field",{attrs:{outlined:"",dense:"",label:"半径"},model:{value:e.radius,callback:function(t){e.radius=t},expression:"radius"}}),n("v-btn",{on:{click:function(t){e.show=!e.show}}},[e._v("隠す "+e._s(e.debugHeight))])],1)])},r=[],i=(n("99af"),n("cb29"),n("baa5"),n("b0c0"),{name:"App",created:function(){var e="initial-scale=1.0, maximum-scale=1.0, user-scalable=no";document.querySelector("meta[name='viewport']").setAttribute("content",e)},mounted:function(){var e=this.$refs.touches,t=this.$refs.canvas;if(!t||!t.getContext)return!1;var n=t.getContext("2d"),o=0,a=!1,r=[];this.initCircleCanvas(t),t.width=2*window.innerWidth,t.height=2*window.innerHeight,this.debugHeight=t.height;for(var i=window.requestIdleCallback||function(e){setTimeout(e,1)},u=0,c=["touchstart","mousedown"];u<c.length;u++){var s=c[u];t.addEventListener(s,(function(e){var t,i,u=.1;e.touches&&e.touches[0]&&"undefined"!==typeof e.touches[0]["force"]?(e.touches[0]["force"]>0&&(u=e.touches[0]["force"]),t=2*e.touches[0].pageX,i=2*e.touches[0].pageY):(u=.2,t=2*e.pageX,i=2*e.pageY),a=!0,o=40*Math.log(u+1),n.lineWidth=o,n.strokeStyle="black",n.lineCap="round",n.lineJoin="round",n.beginPath(),n.moveTo(t,i),r.push({x:t,y:i,lineWidth:o})}))}for(var l=0,h=["touchmove","mousemove"];l<h.length;l++){var d=h[l];t.addEventListener(d,(function(t){if(a){t.preventDefault();var u,c,s=.1;if(t.touches&&t.touches[0]&&"undefined"!==typeof t.touches[0]["force"]?(t.touches[0]["force"]>0&&(s=t.touches[0]["force"]),u=2*t.touches[0].pageX,c=2*t.touches[0].pageY):(s=.2,u=2*t.pageX,c=2*t.pageY),o=40*Math.log(s+1)*.2+.8*o,r.push({x:u,y:c,lineWidth:o}),n.strokeStyle="black",n.lineCap="round",n.lineJoin="round",r.length>=3){var l=r.length-1,h=(r[l].x+r[l-1].x)/2,d=(r[l].y+r[l-1].y)/2;n.lineWidth=r[l-1].lineWidth,n.quadraticCurveTo(r[l-1].x,r[l-1].y,h,d),n.stroke(),n.beginPath(),n.moveTo(h,d)}i((function(){var n=t.touches?t.touches[0]:null;n&&(e.innerHTML="x: ".concat(Math.floor(u),", y: ").concat(Math.floor(c)))}))}}))}for(var f=0,p=["touchend","touchleave","mouseup"];f<p.length;f++){var g=p[f];t.addEventListener(g,(function(e){var t,i;if(e.touches&&e.touches[0]&&"undefined"!==typeof e.touches[0]["force"]?(e.touches[0]["force"],t=2*e.touches[0].pageX,i=2*e.touches[0].pageY):(t=2*e.pageX,i=2*e.pageY),a=!1,n.strokeStyle="black",n.lineCap="round",n.lineJoin="round",r.length>=3){var u=r.length-1;n.quadraticCurveTo(r[u].x,r[u].y,t,i),n.stroke()}r=[],o=0}))}this.loadImage(this.uploadImageUrl)},data:function(){return{radius:250,show:!1,inputImage:null,debugHeight:0,uploadImageUrl:"https://vignette.wikia.nocookie.net/splatoon/images/7/7f/SSBU_Inkling_Girl.png"}},methods:{initCircleCanvas:function(e){var t=this.$refs.circle;if(!t||!t.getContext)return!1;var n=t.getContext("2d"),o=!1;t.width=2*window.innerWidth,t.height=2*window.innerHeight;for(var a=this.radius,r=0,i=["touchstart","mousedown"];r<i.length;r++){var u=i[r];e.addEventListener(u,(function(e){var r,i;e.touches&&e.touches[0]&&"undefined"!==typeof e.touches[0]["force"]?(r=2*e.touches[0].pageX,i=2*e.touches[0].pageY):(r=2*e.pageX,i=2*e.pageY),o=!0,n.clearRect(0,0,t.width,t.height),n.beginPath(),n.fillStyle="rgb(255, 255, 255)",n.arc(r,i,a,0,2*Math.PI),n.fill()}))}for(var c=0,s=["touchmove","mousemove"];c<s.length;c++){var l=s[c];e.addEventListener(l,(function(e){var r,i;o&&(e.preventDefault(),e.touches&&e.touches[0]&&"undefined"!==typeof e.touches[0]["force"]?(r=2*e.touches[0].pageX,i=2*e.touches[0].pageY):(r=2*e.pageX,i=2*e.pageY),n.clearRect(0,0,t.width,t.height),n.beginPath(),n.fillStyle="rgb(255, 255, 255)",n.arc(r,i,a,0,2*Math.PI),n.fill())}))}for(var h=0,d=["touchend","touchleave","mouseup"];h<d.length;h++){var f=d[h];e.addEventListener(f,(function(){n.clearRect(0,0,t.width,t.height),o=!1}))}},onImagePicked:function(e){var t=this;if(void 0!==e&&null!==e){if(e.name.lastIndexOf(".")<=0)return;var n=new FileReader;n.readAsDataURL(e),n.addEventListener("load",(function(){t.uploadImageUrl=n.result,t.clearCanvas(),t.loadImage(t.uploadImageUrl),t.fileLoaded=!0}))}else this.uploadImageUrl=""},loadImage:function(e){var t=this.$refs.canvas,n=this.$refs.image;if(n.width=t.width,n.height=t.height,!n||!n.getContext)return!1;var o=n.getContext("2d"),a=new Image;a.src=e,a.onload=function(){var e,t,r=a.width/a.height,i=parseFloat(n.width)/parseFloat(n.height);console.log("imageAspect",r),console.log("canvasAspect",i),r<i?(console.log("canvasAspect > imageAspect"),e=n.height*r,t=n.height):(console.log("!canvasAspect > imageAspect"),e=n.width,t=n.width/r),o.drawImage(a,0,0,e,t)}}}}),u=i,c=(n("034f"),n("2877")),s=n("6544"),l=n.n(s),h=n("7496"),d=n("8336"),f=n("23a7"),p=n("8654"),g=Object(c["a"])(u,a,r,!1,null,null,null),v=g.exports;l()(g,{VApp:h["a"],VBtn:d["a"],VFileInput:f["a"],VTextField:p["a"]});var m=n("f309");o["a"].use(m["a"]);var w=new m["a"]({});o["a"].config.productionTip=!1,new o["a"]({vuetify:w,render:function(e){return e(v)}}).$mount("#app")},"8a23":function(e,t,n){}});
//# sourceMappingURL=app.2078170b.js.map